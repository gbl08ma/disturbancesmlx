{{template "header.html" . }}
  <div class="widecontent">
    <div class="pure-g">
      <div class="pure-u-1 pure-u-md-1-3" style="text-align: center;">
          {{template "sidebar.html" . }}
      </div>
      <div class="pure-u-1 pure-u-md-2-3">
        <h1>Classificações</h1>
        <div class="pure-menu pure-menu-horizontal">
          <ul class="pure-menu-list">
            <li class="pure-menu-item pure-menu-selected"><a href="/posplay/leaderboards/weekly" class="pure-menu-link">Semanal</a></li>
            <li class="pure-menu-item"><a href="/posplay/leaderboards/alltime" class="pure-menu-link">Desde sempre</a></li>
          </ul>
        </div>
        {{ range $leaderboard := .Leaderboards }}
        <h2>{{ formatLeaderboardWeek $leaderboard.Start }}</h2>
        {{ if (eq (len $leaderboard.Entries) 0) }}
          <p>Ninguém participou nesta semana.</p>
        {{else}}
          <table class="pure-table pure-table-horizontal" style="width: 100%">
            <thead>
              <tr>
                <th>Posição</th>
                <th>Jogador</th>
                <th>XP ganhos</th>
              </tr>
            </thead>
        
            <tbody>
              {{ range $entry := $leaderboard.Entries }}
              {{ $isself := (eq $entry.Player.DiscordID $.Player.DiscordID ) }}
              {{ if (gt $entry.Position 0 )}}
              <tr {{if $isself }}style="background-color: rgb(255, 234, 133);"{{end}}>
                <td style="white-space: nowrap;">{{ $entry.Position }}º</td>
                <td>
                  <div style="display:flex; align-items: center;">
                    {{ if (or (eq $entry.Player.LBPrivacy "PUBLIC") $isself) }}
                      <img src="{{ userAvatarURL $entry.Player.DiscordID "64" }}" style="border-radius: 50%; display:block; max-height: 32px; float: left; margin-right: 5px;">
                      <span>
                        {{ $entry.Player.CachedName }}
                        {{if (and (eq $entry.Player.LBPrivacy "PRIVATE") $isself) }}<br><em style="font-size: 75%">os outros utilizadores não vêem este nome - <a href="/posplay/settings">definições</a></em>{{end}}
                      </span>
                    {{else}}
                      <img src="https://api.adorable.io/avatars/64/{{ $entry.Player.Seed }}.png" style="border-radius: 50%; display:block; max-height: 32px; float: left; margin-right: 5px;">
                      <span>
                        <em>{{ $entry.Player.AnonymousName }}</em>
                      </span>
                    {{end}}
                  </div>
                </td>
                <td style="white-space: nowrap;">{{ $entry.Score }} XP</td>
              </tr>
              {{end}}
              {{ end }}
            </tbody>
          </table>
          {{end}}
        {{end}}
      </div>
    </div>
  </div>
{{template "footer.html" . }}